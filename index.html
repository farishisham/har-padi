<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Lot Kerja Har Padi Ent.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    #header, #footer {
      position: fixed;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      font-family: Helvetica, sans-serif;
      text-align: center;
      z-index: 1000;
    }

    #header {
      top: 0;
      padding: 6px 0;
    }

    #header h1 {
      margin: 0;
      font-size: 1rem;
    }

    #footer {
      bottom: 0;
      font-size: 0.6rem;
      padding: 5px 0;
    }

    #gpsButton {
      position: fixed;
      bottom: 35px;
      right: 15px;
      width: 44px;
      height: 44px;
      background-color: #333;
      border: none;
      border-radius: 50%;
      z-index: 1001;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #gpsIcon {
      width: 22px;
      height: 22px;
      transition: fill 0.3s ease;
      fill: white;
    }

    .mode-1 #gpsIcon { fill: white; }
    .mode-2 #gpsIcon { fill: limegreen; }
    .mode-3 #gpsIcon { fill: orange; }

    .gps-marker {
      position: relative;
      width: 30px;
      height: 30px;
    }

    .gps-marker .circle {
      width: 13px;
      height: 13px;
      background: #007BFF;
      border: 1px solid white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      box-shadow: 0 0 2px #000;
    }

    .gps-marker .arrow {
      position: absolute;
      top: -10px;
      left: 9px;
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 10px solid white;
      z-index: 1;
    }

    .popup-no-x .maplibregl-popup-close-button {
      display: none;
    }

    .search-container {
      position: absolute;
      top: 44px;
      right: 15px;
      height: 48px;
      z-index: 1003;
    }

    .search-btn, .close-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background-color: #333;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      right: 0;
      z-index: 1002;
      padding: 0;
    }

    .search-btn svg, .close-btn svg {
      width: 18px;
      height: 18px;
      fill: white;
    }

    .search-input {
      width: 0;
      opacity: 0;
      padding: 0;
      height: 46px;
      top: -2px;
      transform: translateX(2px);
      border-radius: 30px;
      border: 1px solid #ccc;
      transition: all 0.3s ease;
      background-color: white;
      outline: none;
      padding-left: 10px;
      padding-right: 50px;
      position: absolute;
      right: 0;
      z-index: 1001;
    }

    .search-container.active .search-input {
      width: 200px;
      opacity: 1;
    }

    .search-container.active .search-btn {
      display: none;
    }

    .search-container.active .close-btn {
      display: flex;
    }

    .close-btn {
      display: none;
    }
  </style>
</head>
<body>

<div id="header">
  <h1>LOT KERJA HAR PADI ENT. (in progress)</h1>
</div>

<div id="map"></div>

<div id="footer">
  Â© 2025 Hisham
</div>

<button id="gpsButton" class="mode-1" title="Toggle GPS Mode">
  <svg id="gpsIcon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
    <path d="M257.14,31.03 A25,25 0 0 0 231.19,52.88L210.72,216.68A60,60 0 0 0 196,255.99a60,60 0 0 0 20.51,45.11l15.24,60.96a25,25 0 0 0 48.51,0l15.25-61a60,60 0 0 0 20.51-45.11 60,60 0 0 0-14.71-39.25L280.81,52.88A25,25 0 0 0 257.14,31.03Zm50.1,31.74 6.87,54.95A150,150 0 0 1 406,255.99 150,150 0 0 1 258.9,405.9c-0.78,0.05-1.56,0.07-2.35,0.08a150,150 0 0 1-0.55,0.02 150,150 0 0 1-0.27-0.01c-1.47-0.01-2.93-0.08-4.38-0.22A150,150 0 0 1 106,255.99 150,150 0 0 1 197.88,117.87l6.87-54.95A200,200 0 0 0 57.71,231.08a25,25 0 0 0-1.71-0.09 25,25 0 0 0-25,25 25,25 0 0 0 25,25 25,25 0 0 0 1.75-0.06 200,200 0 0 0 173.34,173.26 25,25 0 0 0-0.09,1.81 25,25 0 0 0 25,25 25,25 0 0 0 25-25 25,25 0 0 0-0.06-1.75 200,200 0 0 0 173.25-173.34 25,25 0 0 0 1.81,0.09 25,25 0 0 0 25-25 25,25 0 0 0-25-25 25,25 0 0 0-1.76,0.06 200,200 0 0 0-147-168.29Z"/>
  </svg>
</button>

<div class="search-container" id="searchContainer">
  <input type="text" class="search-input" id="searchInput" placeholder="Cari...">
  <button class="search-btn" id="searchBtn" title="Search">
    <svg viewBox="0 0 24 24"><path d="M21.707 20.293l-5.388-5.388A7.935 7.935 0 0018 10a8 8 0 10-8 8 7.935 7.935 0 004.905-1.681l5.388 5.388a1 1 0 001.414-1.414zM4 10a6 6 0 1112 0 6 6 0 01-12 0z"/></svg>
  </button>
  <button class="close-btn" id="closeBtn" title="Tutup">
    <svg viewBox="0 0 24 24"><path d="M18.364 5.636a1 1 0 00-1.414 0L12 10.586 7.05 5.636a1 1 0 00-1.414 1.414L10.586 12l-4.95 4.95a1 1 0 101.414 1.414L12 13.414l4.95 4.95a1 1 0 001.414-1.414L13.414 12l4.95-4.95a1 1 0 000-1.414z"/></svg>
  </button>
</div>

<script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
<script>
  // To be continued: GPS mode logic, marker creation, compass rotation, search logic, and polygon interaction
</script>

</body>
</html>
